<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Redirecting...</title>
    <script>
        const PrivateRedirectList = ['private', 'client', 'clientphotos', 'clientshots', 'societyball',
        'warwickball', 'gallery', 'onlinegallery', 'privategallery', 'secure', 'securegallery', 'secureshots'];
        
        const PathTree = window.location.pathname.split('/').filter(segment => segment);
        const isTargetItem = PrivateRedirectList.includes(PathTree[PathTree.length - 1] ? PathTree[PathTree.length - 1].toLowerCase() : '');

        if (isTargetItem && (PathTree.length === 1 || PathTree.length === 2 && PathTree[0].toLowerCase() === 'photography')) {
            // Redirects to private gallery.
            window.location.replace('https://www.alfiekunz.co.uk/photography/gallery/?category=private');
        } else {
            // Redirects to closest parent.
            RedirectUpBranch();
        }

        async function RedirectUpBranch() {
            async function DoesPathExist(path) {
                try {
                    const response = await fetch(path, { method: 'HEAD' });
                    return response.ok;
                } catch {
                    return false;
                }
            }
            
            async function FindClosestParent() {
                let PathTreeSegments = [...PathTree];
                
                while (PathTreeSegments.length > 0) {
                    PathTreeSegments.pop();
                    const Parent = '/' + PathTreeSegments.join('/');
                    if (await DoesPathExist(Parent) || PathTreeSegments.length === 0) {
                        window.location.replace(Parent || '/');
                        return;
                    }
                }
                window.location.replace('/');
            }
            FindClosestParent();
        }
    </script>
</head>
</html>